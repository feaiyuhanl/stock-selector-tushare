# Tushare积分说明

本文档说明Tushare的积分制度、API接口要求和使用建议。

## 目录

- [积分等级对照表](#积分等级对照表)
- [本程序使用的API接口](#本程序使用的api接口)
- [评分器数据支持情况](#评分器数据支持情况)
- [积分等级建议](#积分等级建议)
- [如何查看和提升积分](#如何查看和提升积分)

---

## 积分等级对照表

Tushare采用积分制度管理API访问权限，不同积分等级对应不同的调用限制和接口权限。

| 积分数 | 每分钟调用次数 | 每日总调用次数上限 | 可访问的接口范围 | 捐助金额（元） |
|--------|---------------|-------------------|-----------------|---------------|
| **120** | 50 | 8,000 | 股票基础信息、股票非复权日线行情，其他接口无法调用 | 0（免费） |
| **2000以上** | 200 | 每个API每日100,000次 | Tushare Pro 60%的API可调用 | 200 |
| **5000以上** | 500 | 常规数据无上限 | Tushare Pro 90%的API可调用 | 500 |
| **10000以上** | 1,000 | 常规数据无上限，特色数据每分钟300次 | 包括盈利预测数据、每日筹码和胜率等特色数据权限 | 1,000 |

---

## 本程序使用的API接口

程序使用以下Tushare API接口获取数据：

| API接口 | 用途 | 最低积分要求 | 说明 |
|---------|------|-------------|------|
| `stock_basic` | 获取股票列表 | 120 | 免费用户可用 |
| `daily` | 获取日K线数据 | 120 | 免费用户可用 |
| `daily_basic` | 获取每日指标（PE、PB、换手率等） | 120 | 免费用户可用 |
| `fina_indicator` | 获取财务指标（ROE等） | 2000 | 需要2000积分以上 |
| `income` | 获取利润表数据 | 2000 | 需要2000积分以上 |
| `index_weight` | 获取指数权重数据 | 2000 | 需要2000积分以上（指数权重策略使用） |

---

## 评分器数据支持情况

不同积分等级下，各评分器的数据支持情况：

| 评分器 | 免费用户（120积分） | 付费用户（2000积分） | 说明 |
|--------|-------------------|---------------------|------|
| **PriceScorer** | ✅ 完全可用 | ✅ 完全可用 | 价格数据完整 |
| **VolumeScorer** | ✅ 完全可用 | ✅ 完全可用 | 已优化换手率获取 |
| **FundamentalScorer** | ⚠️ 部分可用（仅PE、PB） | ✅ 完全可用 | ROE、增长率需付费 |
| **IndexWeightStrategy** | ❌ 不可用 | ✅ 完全可用 | 需要2000积分以上 |

### 详细说明

#### 免费用户（120积分）

- ✅ **价格评分**：可以使用价格评分（价格趋势、价格位置、波动率）
- ✅ **成交量评分**：可以使用成交量评分（量比、换手率、成交量趋势）
- ⚠️ **基本面评分**：部分可用
  - ✅ PE市盈率：可用
  - ✅ PB市净率：可用
  - ❌ ROE净资产收益率：不可用（需要2000积分）
  - ❌ 营收增长率：不可用（需要2000积分）
  - ❌ 利润增长率：不可用（需要2000积分）
- ❌ **指数权重策略**：不可用（需要2000积分）

#### 付费用户（2000积分）

- ✅ **所有评分器完全可用**
- ✅ **可以获取完整的财务数据**（ROE、增长率）
- ✅ **可以使用指数权重策略**
- ✅ **每日调用次数大幅提升**（每个API 100,000次）

---

## 积分等级建议

### 免费用户（120积分）

**适用场景**：
- 个人学习和研究
- 少量股票分析（每日不超过8,000次调用）
- 不需要财务数据的高级分析

**可用功能**：
- ✅ 价格评分、成交量评分
- ✅ 基本面评分（PE、PB部分）
- ✅ 基础的股票筛选功能

**限制**：
- ⚠️ 无法获取财务数据（ROE、增长率等），财务评分维度会使用默认值
- ⚠️ 每日调用次数限制为8,000次，适合少量股票分析
- ❌ 无法使用指数权重策略

**建议**：
- 合理使用缓存机制，减少API调用次数
- 优先使用价格和成交量评分
- 如需完整功能，建议升级到2000积分

### 2000积分用户（推荐）⭐

**适用场景**：
- 日常股票筛选和分析
- 需要完整的评分功能
- 中等规模的股票分析（每日每个API 100,000次调用）

**可用功能**：
- ✅ 可以使用本程序的所有功能
- ✅ 可以获取完整的财务数据（ROE、增长率）
- ✅ 可以使用指数权重策略
- ✅ 每日调用次数大幅提升（每个API 100,000次）

**优势**：
- 💰 性价比高（200元）
- ✅ 功能完整，无重大限制
- ✅ 适合大多数用户使用

**建议**：
- **推荐大多数用户使用此积分等级**
- 充分利用缓存机制，提高运行效率
- 合理设置线程数，避免触发限流

### 5000积分及以上

**适用场景**：
- 大规模批量分析
- 专业投资者和研究机构
- 需要更高级的数据接口

**可用功能**：
- ✅ 常规数据无调用上限
- ✅ 可以访问更多高级接口
- ✅ 适合大规模数据处理

**建议**：
- 适合专业用户和研究机构
- 可以处理更大规模的数据分析
- 可以访问更多特色数据接口

---

## 如何查看和提升积分

### 查看当前积分

1. 登录 [Tushare官网](https://tushare.pro/)
2. 进入"积分"页面查看当前积分数
3. 查看可用接口列表和调用限制

### 提升积分

#### 免费用户

- **完成网站任务**：完成Tushare官网的任务获得积分
- **邀请好友**：邀请好友注册获得积分
- **分享经验**：在社区分享使用经验获得积分
- **其他活动**：参与Tushare举办的其他活动

#### 付费用户

- **充值获得积分**：1元=10积分
- **推荐充值金额**：
  - 200元 → 2000积分（推荐）
  - 500元 → 5000积分
  - 1000元 → 10000积分

### 查看接口积分要求

每个API接口的文档页面会显示所需的最低积分要求：

1. 访问 [Tushare接口文档](https://tushare.pro/document/2)
2. 查找对应的接口文档
3. 查看接口说明中的积分要求

---

## 常见问题

### Q1: 提示"权限不足"或"积分不足"怎么办？

**解决方法**：
1. 登录 [Tushare官网](https://tushare.pro/) 查看积分
2. **免费用户（120积分）**：只能使用基础功能，无法获取财务数据
3. **需要完整功能**：建议充值到2000积分以上（200元）
4. 查看具体接口要求：每个API接口的文档会显示所需的最低积分

### Q2: 免费用户可以使用哪些功能？

免费用户（120积分）可以使用：
- ✅ 价格评分、成交量评分
- ✅ 基本面评分（PE、PB部分）
- ⚠️ 财务数据（ROE、增长率）不可用，会使用默认值

### Q3: 如何减少API调用次数？

**建议**：
1. **充分利用缓存机制**：程序会自动缓存数据，减少重复调用
2. **避免频繁使用 `--refresh` 参数**：只有在需要最新数据时才使用
3. **合理设置线程数**：不要设置过高的线程数，避免并发调用过多
4. **使用数据预加载**：首次运行后，后续运行会使用缓存数据

### Q4: 积分不足时程序会如何处理？

**处理方式**：
1. **数据缺失时使用默认值**：如果某个维度的数据无法获取，程序会使用默认中等分（50分）参与计算
2. **自动调整权重**：如果所有股票都缺失某个维度的数据，程序会自动将该维度权重设为0，并重新归一化其他权重
3. **显示警告信息**：程序会显示数据可用性统计，提示哪些数据不可用

### Q5: 如何确保所有维度数据都可用？

**解决方法**：
1. **确保Tushare Token积分≥2000**（免费用户无法获取财务数据）
2. **使用 `--refresh` 参数强制刷新缓存**
3. **在网络良好的环境下运行**
4. **检查Token是否有效**：运行程序查看是否有Token相关错误

---

## 相关文档

- [环境配置文档](setup.md) - Token配置方法
- [缓存机制文档](cache.md) - 缓存策略和优化建议
- [参数配置文档](configuration.md) - 程序参数配置

